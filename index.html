<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baxo Solutions | Botswana Medical Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root { --navy: #002D40; --lime: #A4D65E; }
        
        body { 
            margin: 0; padding: 0; font-family: sans-serif; overflow-x: hidden; min-height: 100vh;
            background: linear-gradient(rgba(248, 250, 252, 0.85), rgba(248, 250, 252, 0.85)), 
                        url('background.jpg') no-repeat center center fixed;
            background-size: cover;
        }

        /* Search Bar Styling */
        .search-container {
            position: fixed; top: 85px; left: 50%; transform: translateX(-50%);
            width: 80%; max-width: 400px; z-index: 60;
        }
        .search-input {
            width: 100%; padding: 12px 20px; border-radius: 30px;
            border: 2px solid var(--lime); background: rgba(255,255,255,0.9);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1); font-size: 14px; outline: none;
        }

        .bubble {
            position: absolute; border-radius: 50%; border: 3px solid var(--lime);
            background-size: cover; background-position: center;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05); 
            animation: floatUp 7s infinite linear;
            cursor: pointer; z-index: 30; opacity: 0.7;
            transition: transform 0.3s ease, opacity 0.3s;
        }
        .bubble:active { transform: scale(0.9); }
        .bubble span { background: rgba(0, 45, 64, 0.85); color: white; padding: 4px 8px; border-radius: 6px; font-size: 9px; font-weight: 800; pointer-events: none; }

        @keyframes floatUp {
            0% { transform: translateY(110vh) scale(0.8); }
            100% { transform: translateY(-25vh) scale(1.1); }
        }

        #air-container { position: fixed; inset: 0; z-index: 30; pointer-events: auto; }
        .interactive { pointer-events: auto; }

        /* Form & UI logic remains same as previous version */
        .qty-input { width: 45px; border: 1px solid #ddd; text-align: center; border-radius: 5px; }
        .remove-btn { color: #ff4d4d; font-weight: bold; cursor: pointer; padding: 0 10px; }
        
        #profile-modal { 
            display: none; position: fixed; inset: 0; z-index: 100;
            background: rgba(0, 45, 64, 0.9); backdrop-filter: blur(10px);
            align-items: center; justify-content: center; color: white; padding: 20px;
        }
    </style>
</head>
<body>

    <nav class="fixed top-0 w-full p-4 z-50 flex justify-between items-center bg-white/80 backdrop-blur-md shadow-sm">
        <div class="flex items-center gap-2">
            <div class="w-10 h-10 rounded-full border-2 border-[var(--lime)] overflow-hidden bg-white">
                <img src="logo.png" class="object-contain w-full h-full" onerror="this.src='https://via.placeholder.com/40'">
            </div>
            <div>
                <h1 class="text-[var(--navy)] font-black leading-none">BAXO</h1>
                <p class="text-[7px] uppercase tracking-widest font-bold text-slate-400">Solutions</p>
            </div>
        </div>
        <button onclick="toggleProfile()" class="bg-[var(--navy)] text-white text-[9px] px-4 py-2 rounded-full font-bold uppercase tracking-widest">Profile</button>
    </nav>

    <div class="search-container">
        <input type="text" id="quick-search" placeholder="Search product (e.g. gloves)..." class="search-input interactive" oninput="handleSearch(this.value)">
    </div>

    <div id="air-container"></div>

    <button onclick="spawnBurst()" class="fixed right-6 bottom-40 z-50 bg-[var(--lime)] text-[var(--navy)] w-12 h-12 rounded-full shadow-2xl flex items-center justify-center font-black text-xl interactive">â†»</button>

    <div class="fixed bottom-0 w-full bg-white p-6 rounded-t-[2.5rem] shadow-[0_-15px_50px_rgba(0,0,0,0.1)] z-40">
        <div class="max-w-md mx-auto">
            <details class="interactive">
                <summary class="flex justify-between items-center cursor-pointer list-none">
                    <div class="flex items-center gap-3">
                        <div class="bg-[var(--lime)] text-[var(--navy)] w-8 h-8 rounded-full flex items-center justify-center font-black text-sm" id="item-count">0</div>
                        <h3 class="font-black text-[var(--navy)] uppercase text-xs tracking-widest">Your Request</h3>
                    </div>
                    <span class="text-slate-300">â–²</span>
                </summary>
                
                <div class="mt-4 space-y-3">
                    <input type="text" id="client-name" placeholder="Name/Company *" class="w-full p-3 rounded-xl bg-slate-50 text-xs border border-slate-200">
                    <input type="text" id="client-contact" placeholder="Contact Number *" class="w-full p-3 rounded-xl bg-slate-50 text-xs border border-slate-200">
                    <div id="quote-list" class="max-h-32 overflow-y-auto space-y-2 py-2"></div>
                    <textarea id="special-request" placeholder="Other items..." class="w-full p-3 rounded-xl bg-slate-50 text-xs border border-slate-200" rows="2"></textarea>
                    
                    <label class="flex items-center gap-2 text-[10px] text-slate-500">
                        <input type="checkbox" id="terms-check"> I agree to terms.
                    </label>
                    <button onclick="sendToWhatsApp()" class="w-full bg-[#25D366] text-white py-4 rounded-2xl font-black uppercase tracking-widest shadow-lg">Send to WhatsApp</button>
                </div>
            </details>
        </div>
    </div>

    <script>
        const air = document.getElementById('air-container');
        const quoteList = document.getElementById('quote-list');
        const itemCount = document.getElementById('item-count');
        let selectedItems = [];

        const inventory = [
            { n: "Needles", i: "needles.jpg" }, { n: "Syringes", i: "syringes.jpg" },
            { n: "Bandages", i: "bandages.jpg" }, { n: "Cotton Wool", i: "cotton.jpg" },
            { n: "Gauze swabs", i: "gauze.jpg" }, { n: "Nitrile Gloves", i: "nitrile.jpg" },
            { n: "Latex Gloves", i: "latex.jpg" }, { n: "Alcohol Swabs", i: "alcohol_swabs.jpg" },
            { n: "IV Cannulas", i: "cannulas.jpg" }, { n: "Urine Containers", i: "urine_cups.jpg" },
            { n: "Surgical Tape", i: "tape.jpg" }, { n: "HIV Test Kits", i: "hiv_kits.jpg" },
            { n: "Sharps Bins", i: "sharps_bin.jpg" }, { n: "Hand Sanitizer", i: "sanitizer.jpg" },
            { n: "Tongue Depressors", i: "depressors.jpg" }, { n: "Crepe Bandages", i: "crepe.jpg" }
        ];

        function createBubble(specificItem = null) {
            const item = specificItem || inventory[Math.floor(Math.random() * inventory.length)];
            const b = document.createElement('div');
            b.className = 'bubble w-28 h-28';
            b.style.left = (Math.random() * 70 + 5) + 'vw';
            b.style.backgroundImage = `url('${item.i}')`;
            b.innerHTML = `<span>${item.n}</span>`;
            
            b.onclick = () => {
                const existing = selectedItems.find(i => i.name === item.n);
                if (existing) { existing.qty++; } else { selectedItems.push({ name: item.n, qty: 1 }); }
                updateUI();
                b.style.transform = 'scale(0)';
                setTimeout(() => b.remove(), 200);
            };
            air.appendChild(b);
            setTimeout(() => b.remove(), 7000);
        }

        // QUICK SEARCH LOGIC
        function handleSearch(query) {
            if (!query) return;
            const matches = inventory.filter(item => item.n.toLowerCase().includes(query.toLowerCase()));
            if (matches.length > 0) {
                // Clear air of non-matches
                document.querySelectorAll('.bubble').forEach(b => b.remove());
                matches.forEach(m => createBubble(m));
            }
        }

        // BURST / REFILL LOGIC
        function spawnBurst() {
            for(let i=0; i<8; i++) setTimeout(createBubble, i * 150);
        }

        // SHAKE TO SPAWN (For Mobile)
        let lastX, lastY, lastZ;
        let moveThreshold = 15; 
        window.addEventListener('devicemotion', (e) => {
            let acc = e.accelerationIncludingGravity;
            if(!acc.x) return;
            let diff = Math.abs(acc.x - lastX) + Math.abs(acc.y - lastY);
            if(diff > moveThreshold) { spawnBurst(); }
            lastX = acc.x; lastY = acc.y; lastZ = acc.z;
        });

        function updateUI() {
            itemCount.innerText = selectedItems.reduce((acc, item) => acc + item.qty, 0);
            quoteList.innerHTML = selectedItems.map((item, index) => `
                <div class="flex justify-between items-center bg-white p-2 rounded-lg border border-slate-100 shadow-sm">
                    <span class="text-[var(--navy)] font-bold text-[10px]">${item.name}</span>
                    <div class="flex items-center gap-2">
                        <input type="number" value="${item.qty}" min="1" onchange="updateQty(${index}, this.value)" class="qty-input text-[10px]">
                        <span onclick="removeItem(${index})" class="remove-btn">Ã—</span>
                    </div>
                </div>
            `).join('');
        }

        function updateQty(index, val) { selectedItems[index].qty = parseInt(val) || 1; updateUI(); }
        function removeItem(index) { selectedItems.splice(index, 1); updateUI(); }
        function toggleProfile() { /* Existing toggle logic */ }
        function sendToWhatsApp() {
            const name = document.getElementById('client-name').value;
            const contact = document.getElementById('client-contact').value;
            const agreed = document.getElementById('terms-check').checked;
            if(!name || !contact || !agreed) { alert("Check fields and terms."); return; }
            let msg = `*BAXO REQUEST*\nðŸ‘¤ ${name}\nðŸ“ž ${contact}\n\n*Items:*\n` + selectedItems.map(i => `- ${i.name} (x${i.qty})`).join('\n');
            window.open(`https://wa.me/26773811270?text=${encodeURIComponent(msg)}`);
        }

        setInterval(createBubble, 1000); // Continuous spawn every 1s
    </script>
</body>
</html>
