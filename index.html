<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Baxo Solutions | Gamified Procurement</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;700;900&display=swap" rel="stylesheet">
<style>
    :root { --navy: #002D40; --lime: #A4D65E; }
    body { margin:0; padding:0; font-family:'Inter', sans-serif; height:100dvh; width:100vw; overflow:hidden; background: #d9e2ec; }
    
    /* DEVICE WRAPPER */
    #app-wrapper {
        width: 100%; height: 100%; position: relative; overflow: hidden;
        background: linear-gradient(135deg, #f0f4f8 0%, #d9e2ec 100%);
        transition: all 0.3s ease;
    }
    .mobile-view {
        max-width: 400px; margin: 0 auto;
        border-left: 1px solid rgba(255,255,255,0.5);
        border-right: 1px solid rgba(255,255,255,0.5);
        box-shadow: 0 0 50px rgba(0,0,0,0.2);
    }

    /* AMBIENT BUBBLES */
    #bubble-layer { position: absolute; inset: 0; z-index: 0; overflow: hidden; pointer-events: none; }
    .ambient-bubble {
        position: absolute; border-radius: 50%; 
        background: rgba(255, 255, 255, 0.3); 
        border: 1px solid rgba(255,255,255,0.4);
        backdrop-filter: blur(1px);
        display: flex; align-items: center; justify-content: center;
        opacity: 0; pointer-events: none; 
        animation: inflatePop linear forwards;
    }
    .ambient-bubble img { width: 50%; height: 50%; object-fit: contain; opacity: 0.6; }
    @keyframes inflatePop {
        0% { transform: scale(0); opacity: 0; }
        20% { transform: scale(1); opacity: 0.6; }
        80% { transform: scale(1.1) translateY(-20px); opacity: 0.6; }
        100% { transform: scale(1.4); opacity: 0; } 
    }

    /* UI PANELS */
    .glass { background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.5); }
    .glass-card {
        background: rgba(255, 255, 255, 0.6); backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.6);
        box-shadow: 0 8px 32px rgba(0,0,0,0.05);
        transition: transform 0.2s, background 0.2s; position: relative; z-index: 20; 
    }
    .glass-card:hover { transform: translateY(-3px); background: rgba(255, 255, 255, 0.95); border-color: var(--lime); }

    /* CATALOG DRAWER */
    #catalog-drawer { transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1); transform: translateX(100%); height: 100%; }
    #catalog-drawer.open { transform: translateX(0); }

    /* TOAST */
    .toast {
        position: absolute; top: 20px; left: 50%; transform: translateX(-50%) translateY(-100px);
        background: var(--navy); color: white; padding: 12px 24px; 
        z-index: 300; transition: transform 0.3s; border-radius: 99px; font-size: 12px; font-weight: bold;
        box-shadow: 0 10px 30px rgba(0,45,64,0.3); display: flex; align-items: center; gap: 10px;
    }
    .toast.show { transform: translateX(-50%) translateY(0); }
    
    /* SCROLLBARS */
    ::-webkit-scrollbar { width: 4px; }
    ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
    .reviews-scroll { display: flex; gap: 12px; overflow-x: auto; padding-bottom: 10px; scroll-snap-type: x mandatory; }
    .review-card { min-width: 240px; scroll-snap-align: start; background: white; padding: 16px; rounded: 16px; border: 1px solid #f1f5f9; box-shadow: 0 2px 10px rgba(0,0,0,0.03); }
    
    .view-toggle {
        position: fixed; bottom: 20px; left: 20px; z-index: 999;
        background: var(--navy); color: white; border-radius: 50%;
        width: 50px; height: 50px; display: flex; align-items: center; justify-content: center;
        box-shadow: 0 10px 25px rgba(0,0,0,0.3); cursor: pointer; font-size: 24px;
    }
    @media (max-width: 768px) { .view-toggle { display: none; } }
</style>
</head>
<body>

<button class="view-toggle" onclick="toggleView()" title="Switch View">üì±</button>

<div id="app-wrapper">

    <div id="bubble-layer"></div>

    <nav class="absolute top-0 w-full z-[100] p-4">
        <div class="glass rounded-full px-4 py-2 flex justify-between items-center shadow-lg mx-auto">
            <div class="flex items-center gap-2 cursor-pointer" onclick="location.reload()">
                <img src="logo.png" class="w-8 h-8 object-contain" onerror="this.src='https://placehold.co/40x40?text=Baxo'">
                <div>
                    <h1 class="text-[var(--navy)] text-xs font-black leading-none uppercase">Baxo</h1>
                    <p class="text-[6px] tracking-widest text-slate-500 uppercase font-bold">Solutions</p>
                </div>
            </div>
            <div class="flex gap-2">
                <button onclick="toggleCatalog()" class="bg-[var(--navy)] hover:bg-slate-700 text-white px-4 py-2 rounded-full font-bold uppercase text-[9px] transition-colors shadow-md flex items-center gap-1 active:scale-95">
                    üì¶ Catalog <span id="nav-cart-badge" class="bg-[var(--lime)] text-[var(--navy)] px-1.5 rounded-full text-[8px] hidden">0</span>
                </button>
                <button onclick="toggleProfile()" class="bg-white border border-slate-200 text-[var(--navy)] px-4 py-2 rounded-full font-bold uppercase text-[9px] hover:bg-slate-50 transition-colors shadow-sm active:scale-95">
                    üë§ Profile
                </button>
            </div>
        </div>
    </nav>

    <main class="relative z-50 h-full overflow-y-auto pb-24 pt-24 px-4 scroll-smooth">
        <div class="text-center max-w-lg mx-auto">
            <h2 class="text-5xl md:text-6xl font-black text-[var(--navy)] leading-[0.9] mb-4 uppercase drop-shadow-sm">
                Prepared.<br>Protected.<br><span class="text-[var(--lime)]">Perfected.</span>
            </h2>
            <p class="text-slate-500 font-bold uppercase tracking-widest text-[9px] mb-8 bg-white/60 inline-block px-4 py-2 rounded-full backdrop-blur-sm border border-white">
                Standardizing Excellence in Botswana's Supply Chain
            </p>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-12 relative z-20 text-left">
                <div onclick="openCategory('PPE Safety')" class="glass-card p-4 rounded-2xl cursor-pointer group flex items-center gap-4">
                    <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center text-xl shadow-sm group-hover:scale-110 transition-transform flex-shrink-0">üõ°Ô∏è</div>
                    <div>
                        <h3 class="text-[var(--navy)] font-black uppercase text-xs">PPE & Safety</h3>
                        <p class="text-[9px] text-slate-500 font-medium leading-tight mt-1">SABS footwear, high-vis, and hard hats.</p>
                    </div>
                </div>
                <div onclick="openCategory('Medical Consumables')" class="glass-card p-4 rounded-2xl cursor-pointer group flex items-center gap-4">
                    <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center text-xl shadow-sm group-hover:scale-110 transition-transform flex-shrink-0">üè•</div>
                    <div>
                        <h3 class="text-[var(--navy)] font-black uppercase text-xs">Medical Supply</h3>
                        <p class="text-[9px] text-slate-500 font-medium leading-tight mt-1">Sterile gloves, syringes, and diagnostic kits.</p>
                    </div>
                </div>
                <div onclick="openCategory('Dental Supplies')" class="glass-card p-4 rounded-2xl cursor-pointer group flex items-center gap-4 border-l-4 border-l-[var(--lime)]">
                    <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center text-xl shadow-sm group-hover:scale-110 transition-transform flex-shrink-0">ü¶∑</div>
                    <div>
                        <h3 class="text-[var(--navy)] font-black uppercase text-xs">Dental</h3>
                        <p class="text-[9px] text-slate-500 font-medium leading-tight mt-1">Anesthetics, bibs, handpieces & instruments.</p>
                    </div>
                </div>
                <div onclick="openCategory('Hygiene')" class="glass-card p-4 rounded-2xl cursor-pointer group flex items-center gap-4">
                    <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center text-xl shadow-sm group-hover:scale-110 transition-transform flex-shrink-0">‚ú®</div>
                    <div>
                        <h3 class="text-[var(--navy)] font-black uppercase text-xs">Hygiene</h3>
                        <p class="text-[9px] text-slate-500 font-medium leading-tight mt-1">Industrial chemicals and bulk detergents.</p>
                    </div>
                </div>
            </div>

            <div class="text-left w-full mb-8">
                <div class="flex justify-between items-end mb-4">
                    <div>
                        <h3 class="text-[var(--navy)] font-black uppercase text-lg">Client Feedback</h3>
                        <p class="text-[9px] text-slate-400 font-bold uppercase tracking-wider">Verified 4+ Star Reviews</p>
                    </div>
                    <button onclick="submitReview()" class="text-[9px] font-bold text-[var(--navy)] bg-[var(--lime)] px-3 py-2 rounded-lg hover:brightness-110 transition-colors shadow-sm">
                        + Review on WhatsApp
                    </button>
                </div>
                <div id="reviews-container" class="reviews-scroll no-scrollbar"></div>
            </div>
        </div>
    </main>

    <div id="catalog-drawer" class="absolute inset-y-0 right-0 w-full z-[200] glass shadow-2xl flex flex-col border-l border-white/50 bg-white/95 backdrop-blur-xl">
        <div class="p-4 border-b border-white/50 flex justify-between items-center bg-white/40 flex-none">
            <div>
                <h2 class="text-xl font-black text-[var(--navy)] uppercase">Inventory</h2>
                <p class="text-[9px] text-slate-500 font-bold uppercase tracking-wider">Select items & quantities</p>
            </div>
            <button onclick="toggleCatalog()" class="w-8 h-8 rounded-full bg-white hover:bg-red-50 text-slate-400 hover:text-red-500 transition-colors font-bold text-lg shadow-sm">&times;</button>
        </div>
        
        <div class="px-4 py-3 bg-white/50 border-b border-white/50 flex-none">
            <div class="relative">
                <input type="text" id="search" onkeyup="renderCatalog()" placeholder="Search 'Dental', 'Gloves'..." 
                       class="w-full bg-white border border-slate-200 rounded-xl pl-9 pr-4 py-2 text-xs font-bold focus:outline-none focus:border-[var(--lime)] focus:ring-2 focus:ring-[var(--lime)]/20 transition-all">
                <span class="absolute left-3 top-2.5 text-slate-400">üîç</span>
            </div>
        </div>

        <div id="catalog-list" class="flex-1 overflow-y-auto p-4 space-y-2"></div>

        <div class="p-4 bg-white border-t border-slate-100 shadow-[0_-10px_40px_rgba(0,0,0,0.05)] flex-none">
            <div class="flex justify-between items-center mb-2">
                <span class="font-black text-[var(--navy)] text-xs uppercase">Quote Cart</span>
                <span id="cart-count" class="bg-[var(--lime)] text-[var(--navy)] text-[10px] font-black px-2 py-0.5 rounded-full shadow-sm">0 Items</span>
            </div>
            
            <div id="cart-items-container" class="mb-3 pt-2 border-t border-slate-100 min-h-[50px] max-h-[120px] overflow-y-auto pr-1">
                <p class="text-[10px] text-slate-400 italic py-2">Your cart is empty.</p>
            </div>

            <button onclick="openContactModal()" class="w-full bg-[#25D366] text-white py-3 rounded-xl font-black uppercase tracking-widest shadow-lg hover:brightness-105 hover:shadow-green-500/30 transition-all flex items-center justify-center gap-2 text-xs">
                <span>üöÄ</span> Submit via WhatsApp
            </button>
        </div>
    </div>

    <div id="profile-modal" class="absolute inset-0 z-[200] bg-[var(--navy)]/90 backdrop-blur-sm hidden items-center justify-center p-4">
        <div class="bg-white rounded-[2rem] p-6 max-w-xs w-full text-center relative shadow-2xl border-4 border-[var(--lime)]">
            <div class="w-12 h-1 bg-slate-200 rounded-full mx-auto mb-4"></div>
            <button onclick="toggleProfile()" class="absolute top-3 right-3 text-xl text-slate-300 hover:text-[var(--navy)]">&times;</button>
            <div class="relative inline-block mb-3">
                <img src="md-portrait.jpg" class="w-20 h-20 rounded-full border-4 border-white shadow-xl object-cover bg-slate-100" onerror="this.src='https://placehold.co/100x100?text=MD'">
                <div class="absolute bottom-0 right-0 bg-[var(--lime)] text-[var(--navy)] text-[8px] font-black px-2 py-0.5 rounded-full border-2 border-white">CEO</div>
            </div>
            <h3 class="text-[var(--navy)] font-black uppercase text-lg leading-none">Baxo Solutions</h3>
            <p class="text-[9px] text-slate-400 font-bold uppercase mb-4 tracking-widest mt-1">Medical ‚Ä¢ Dental ‚Ä¢ Safety</p>
            <div class="bg-slate-50 p-3 rounded-xl mb-4 text-left border border-slate-100">
                <p class="text-[9px] text-slate-500 font-bold uppercase mb-1">Our Mission:</p>
                <p class="text-[10px] text-[var(--navy)] font-bold italic">"Standardizing Excellence in Botswana's Supply Chain."</p>
            </div>
            <div class="space-y-2">
                <button onclick="shareBusinessCard()" class="w-full bg-[#25D366] hover:bg-green-500 text-white py-3 rounded-xl font-bold text-[10px] uppercase shadow-lg transition-all flex items-center justify-center gap-2">
                    <span>üì≤</span> Share Business Card
                </button>
                <button onclick="downloadProfile()" class="w-full border-2 border-slate-100 hover:border-[var(--navy)] text-[var(--navy)] py-3 rounded-xl font-bold text-[10px] uppercase transition-all flex items-center justify-center gap-2">
                    <span>üìÑ</span> Download Profile PDF
                </button>
            </div>
        </div>
    </div>

    <div id="contact-modal" class="absolute inset-0 z-[210] bg-[var(--navy)]/95 backdrop-blur-sm hidden items-center justify-center p-4">
        <div class="bg-white rounded-3xl p-6 max-w-xs w-full relative shadow-2xl animate-bounce-in">
            <button onclick="closeContactModal()" class="absolute top-4 right-4 text-xl text-slate-300 hover:text-[var(--navy)]">&times;</button>
            <h3 class="text-[var(--navy)] font-black uppercase text-lg mb-1">Final Step</h3>
            <p class="text-[10px] text-slate-400 font-bold uppercase mb-4">Enter your details to generate quote</p>
            <form onsubmit="finalSubmit(event)" class="space-y-3">
                <div><label class="text-[9px] font-black text-[var(--navy)] uppercase">Full Name *</label><input type="text" id="cust-name" required class="w-full bg-slate-50 border border-slate-200 rounded-xl px-3 py-2 text-xs font-bold focus:border-[var(--lime)] outline-none mt-1"></div>
                <div><label class="text-[9px] font-black text-[var(--navy)] uppercase">Email Address *</label><input type="email" id="cust-email" required class="w-full bg-slate-50 border border-slate-200 rounded-xl px-3 py-2 text-xs font-bold focus:border-[var(--lime)] outline-none mt-1"></div>
                <div><label class="text-[9px] font-black text-[var(--navy)] uppercase">Phone Number *</label><input type="tel" id="cust-phone" required class="w-full bg-slate-50 border border-slate-200 rounded-xl px-3 py-2 text-xs font-bold focus:border-[var(--lime)] outline-none mt-1"></div>
                <button type="submit" class="w-full bg-[var(--lime)] text-[var(--navy)] py-3 rounded-xl font-black uppercase tracking-widest shadow-lg hover:brightness-105 mt-2 text-xs">Generate Quote üöÄ</button>
            </form>
        </div>
    </div>

    <div id="toast" class="toast hidden">
        <span class="text-lg">‚úÖ</span>
        <span>Item Added!</span>
    </div>

</div>

<script>
const reviewsData = [
    { name: "K. Dube", loc: "Gaborone", text: "Delivery to the clinic was faster than our usual supplier. The gloves are great quality.", stars: 5 },
    { name: "T. Molefe", loc: "Jwaneng", text: "Ordered bulk safety boots for our site. Pricing was competitive and service professional.", stars: 5 },
    { name: "S. Phiri", loc: "Lobatse", text: "Love the easy WhatsApp ordering. Saves me so much admin time.", stars: 5 },
    { name: "A. Kgosi", loc: "Maun", text: "The Reg 7 kits were fully stocked and compliant. Thank you Baxo.", stars: 4 }
];

const inventory = [
  // --- DENTAL ---
  { n:"Dental Bibs", i:"dental_bibs.jpg", c:"Dental Supplies", u:["Blue (500)", "Green (500)", "Pink (500)"] },
  { n:"Saliva Ejectors", i:"saliva_ejectors.jpg", c:"Dental Supplies", u:["Clear (100)", "Blue (100)"] },
  { n:"Cotton Rolls", i:"cotton_rolls.jpg", c:"Dental Supplies", u:["Size 2 (1000)"] },
  { n:"Dental Needles", i:"dental_needles.jpg", c:"Dental Supplies", u:["27G Long (100)", "30G Short (100)"] },
  { n:"Lidocaine 2%", i:"lidocaine.jpg", c:"Dental Supplies", u:["Box 50 Cartridges"] },
  { n:"High-Speed Handpiece", i:"handpiece_high.jpg", c:"Dental Supplies", u:["Standard Head", "Mini Head"] },
  { n:"Low-Speed Handpiece", i:"handpiece_low.jpg", c:"Dental Supplies", u:["Complete Kit"] },
  { n:"Curing Light", i:"curing_light.jpg", c:"Dental Supplies", u:["Wireless LED Unit"] },
  { n:"Ultrasonic Scaler", i:"scaler.jpg", c:"Dental Supplies", u:["Unit with 5 Tips"] },
  { n:"Diamond Burs", i:"burs.jpg", c:"Dental Supplies", u:["Assorted Kit (10)"] },
  { n:"Prophy Paste", i:"prophy.jpg", c:"Dental Supplies", u:["Coarse Mint", "Medium Cherry"] },
  { n:"Alginate Material", i:"alginate.jpg", c:"Dental Supplies", u:["500g Bag"] },
  // MEDICAL
  { n:"Alcohol Swabs", i:"alcohol_swabs.jpg", c:"Medical Consumables", u:["Box 100", "Box 200"] },
  { n:"Bandages", i:"bandages.jpg", c:"Medical Consumables", u:["50mm", "75mm", "100mm"] },
  { n:"IV Cannulas", i:"cannulas.jpg", c:"Medical Consumables", u:["18G", "20G", "22G", "24G"] },
  { n:"Cotton Wool", i:"cotton.jpg", c:"Medical Consumables", u:["100g", "500g"] },
  { n:"Dental Supplies", i:"dental.jpg", c:"Medical Consumables", u:["Standard Pack"] },
  { n:"Tongue Depressors", i:"depressors.jpg", c:"Medical Consumables", u:["Box 100"] },
  { n:"Linen Savers", i:"linensaver.jpg", c:"Medical Consumables", u:["Pack 20 (Standard)", "Pack 20 (Large)"] }, 
  { n:"First Aid Kit", i:"firstaid.jpg", c:"Medical Consumables", u:["Reg 3 Kit", "Reg 7 Kit"] },
  { n:"Gauze Swabs", i:"gauze.jpg", c:"Medical Consumables", u:["100x100mm (Sterile)", "100x100mm (Non-Sterile)"] },
  { n:"HIV Test Kits", i:"hiv_kits.jpg", c:"Medical Consumables", u:["Single Kit", "Box of 25"] },
  { n:"Latex Gloves", i:"latex.jpg", c:"Medical Consumables", u:["XS", "S", "M", "L", "XL"] },
  { n:"Needles", i:"needles.jpg", c:"Medical Consumables", u:["18G", "20G", "21G", "22G", "23G", "25G"] },
  { n:"Nitrile Gloves", i:"nitrile.jpg", c:"Medical Consumables", u:["XS", "S", "M", "L", "XL"] },
  { n:"Hand Sanitizer", i:"sanitizer.jpg", c:"Medical Consumables", u:["500ml", "1L", "5L", "25L"] },
  { n:"Sharps Bin", i:"sharps_bin.jpg", c:"Medical Consumables", u:["5L", "10L", "20L"] },
  { n:"Spill Kit", i:"spill.jpg", c:"Medical Consumables", u:["Bio-Hazard", "Chemical"] },
  { n:"Syringes", i:"syringes.jpg", c:"Medical Consumables", u:["2ml", "5ml", "10ml", "20ml", "50ml"] },
  { n:"Surgical Tape", i:"tape.jpg", c:"Medical Consumables", u:["12mm", "24mm", "48mm"] },
  { n:"Urine Cups", i:"urine_cups.jpg", c:"Medical Consumables", u:["Standard Unit"] },
  // SAFETY
  { n:"Plastic Aprons", i:"apron.jpg", c:"PPE Safety", u:["Pack 100 (White)", "Blue", "Red"] },
  { n:"Sleeve Protectors", i:"sleeveprotector.jpg", c:"PPE Safety", u:["Pair (Blue)", "Pair (White)"] },
  { n:"Beard Covers", i:"beardcover.jpg", c:"PPE Safety", u:["Pack 100"] },
  { n:"Mop Caps", i:"mopcap.jpg", c:"PPE Safety", u:["White", "Blue", "Red", "Green"] },
  { n:"Surgeon Caps", i:"surgeoncap.jpg", c:"PPE Safety", u:["Pack 100"] },
  { n:"Safety Shoes", i:"shoes.jpg", c:"PPE Safety", u:["Size 3", "Size 4", "Size 5", "Size 6", "Size 7", "Size 8", "Size 9", "Size 10", "Size 11", "Size 12", "Size 13"] },
  { n:"Rubber Gloves", i:"rubbergloves.jpg", c:"PPE Safety", u:["Elbow Length", "Standard Length"] },
  // EQUIPMENT
  { n:"Hospital Bed", i:"bed.jpg", c:"Medical Equipment", u:["Manual", "Electric", "ICU Spec"] },
  { n:"Wheelchair", i:"wheelchair.jpg", c:"Medical Equipment", u:["Standard", "Heavy Duty", "Commode"] },
  // PLACEHOLDERS
  { n:"Two-Tone Conti Suit", i:"placeholder_suit.jpg", c:"PPE Safety", u:["30", "32", "34", "36", "38", "40", "42", "44", "46", "48", "50", "52", "54"] },
  { n:"Reflective Vest", i:"placeholder_vest.jpg", c:"PPE Safety", u:["S", "M", "L", "XL", "2XL", "3XL", "4XL", "5XL"] },
  { n:"Dust Mask (FFP2)", i:"placeholder_mask.jpg", c:"PPE Safety", u:["Box 20"] },
  { n:"Hospital Disinfectant", i:"placeholder_chem.jpg", c:"Hygiene", u:["5L", "25L"] },
  { n:"Industrial Detergent", i:"placeholder_det.jpg", c:"Hygiene", u:["5L", "25L"] }
];

let cart = [];

function toggleView() {
    const wrapper = document.getElementById('app-wrapper');
    const btn = document.querySelector('.view-toggle');
    if (wrapper.classList.contains('mobile-view')) {
        wrapper.classList.remove('mobile-view');
        btn.innerText = 'üì±';
    } else {
        wrapper.classList.add('mobile-view');
        btn.innerText = 'üñ•Ô∏è';
    }
}

function loadReviews() {
    const container = document.getElementById('reviews-container');
    const filtered = reviewsData.filter(r => r.stars >= 4);
    container.innerHTML = filtered.map(r => `
        <div class="review-card">
            <div class="flex text-yellow-400 text-xs mb-2">${'‚òÖ'.repeat(r.stars)}</div>
            <p class="text-[10px] text-slate-600 font-medium italic mb-2 leading-tight">"${r.text}"</p>
            <div class="flex items-center gap-2">
                <div class="w-5 h-5 bg-slate-200 rounded-full flex items-center justify-center text-[8px] font-black text-slate-500">${r.name.substring(0,2).toUpperCase()}</div>
                <span class="text-[9px] font-bold text-[var(--navy)]">${r.name}, ${r.loc}</span>
            </div>
        </div>`).join('');
}

function submitReview() {
    let msg = `üåü *REVIEW FOR BAXO SOLUTIONS* üåü\n\nName:\nRating (1-5):\nLocation:\nComment:`;
    window.open(`https://wa.me/26773811270?text=${encodeURIComponent(msg)}`);
}

// --- AMBIENT BUBBLE ENGINE ---
const MAX_BUBBLES = 15;
function spawnBubble() {
    if(document.hidden) return; 
    if(document.getElementById('bubble-layer').childElementCount >= MAX_BUBBLES) return; 

    const validItems = inventory.filter(i => !i.i.includes('placeholder'));
    const item = validItems[Math.floor(Math.random() * validItems.length)];
    const el = document.createElement('div');
    el.className = 'ambient-bubble';
    
    const duration = Math.random() * 4 + 6; 
    const size = Math.floor(Math.random() * 40) + 60; 
    
    el.style.width = `${size}px`; el.style.height = `${size}px`;
    el.style.left = `${Math.random() * 90}%`;
    el.style.top = `${Math.random() * 80 + 10}%`; 
    el.style.animationDuration = `${duration}s`; 
    
    el.innerHTML = `<img src="${item.i}" onerror="this.src='logo.png'">`;
    
    document.getElementById('bubble-layer').appendChild(el);
    setTimeout(() => { if(el.parentNode) el.remove(); }, duration * 1000);
}
setInterval(spawnBubble, 1500); 

// --- APP LOGIC ---
function toggleCatalog() {
    const drawer = document.getElementById('catalog-drawer');
    drawer.classList.toggle('open');
    if(drawer.classList.contains('open')) renderCatalog();
}
function openCategory(catName) {
    toggleCatalog();
    document.getElementById('search').value = catName;
    renderCatalog();
}
function toggleProfile() {
    const modal = document.getElementById('profile-modal');
    modal.classList.toggle('hidden'); modal.classList.toggle('flex');
}
function renderCatalog() {
    const term = document.getElementById('search').value.toLowerCase();
    const container = document.getElementById('catalog-list');
    container.innerHTML = '';
    const filtered = inventory.filter(i => i.n.toLowerCase().includes(term) || i.c.toLowerCase().includes(term));
    const categories = [...new Set(filtered.map(i => i.c))];
    if(filtered.length === 0) { container.innerHTML = `<div class="text-center text-slate-400 text-xs py-10 font-bold uppercase">No items found</div>`; return; }
    categories.forEach(cat => {
        const catHeader = document.createElement('div');
        catHeader.className = "text-[9px] font-black text-slate-400 uppercase tracking-widest mt-4 mb-2 ml-1";
        catHeader.innerText = cat;
        container.appendChild(catHeader);
        filtered.filter(i => i.c === cat).forEach(item => {
            const selectId = `sel-${item.n.replace(/[^a-zA-Z0-9]/g, '')}`;
            const isPlaceholder = item.i.includes('placeholder');
            const imgHTML = isPlaceholder ? `<div class="w-8 h-8 bg-slate-200 rounded-lg flex items-center justify-center text-xs">üì¶</div>` : `<img src="${item.i}" class="w-8 h-8 object-contain bg-white rounded-lg border border-slate-200" onerror="this.src='logo.png'">`;
            const optionHTML = item.u.length > 1 ? `<select id="${selectId}" class="bg-white border border-slate-200 text-[8px] font-bold rounded p-1 w-full outline-none focus:border-[var(--navy)] mt-1">${item.u.map(opt => `<option value="${opt}">${opt}</option>`).join('')}</select>` : `<p class="text-[8px] text-slate-400 font-bold bg-slate-100 px-2 rounded inline-block mt-1">${item.u[0]}</p>`;
            const div = document.createElement('div');
            div.className = "bg-slate-50 p-2 rounded-xl border border-slate-100 flex flex-col gap-2 hover:border-[var(--lime)] transition-colors group mb-2";
            div.innerHTML = `<div class="flex items-center justify-between w-full"><div class="flex items-center gap-2 w-full">${imgHTML}<div class="flex-1 min-w-0"><h4 class="font-bold text-[var(--navy)] text-[10px] uppercase truncate">${item.n}</h4>${optionHTML}</div></div><button onclick="addToCartFromCatalog('${item.n}', '${selectId}')" class="bg-white border border-slate-200 text-[var(--navy)] hover:bg-[var(--navy)] hover:text-white w-7 h-7 rounded-lg font-black transition-colors shadow-sm flex-shrink-0 ml-1 text-xs">+</button></div>`;
            container.appendChild(div);
        });
    });
}
function addToCartFromCatalog(name, selectId) {
    const item = inventory.find(i => i.n === name);
    let size = item.u[0];
    const el = document.getElementById(selectId);
    if(el) size = el.value;
    addToCart(item, size);
}
function addToCart(item, size) {
    const existing = cart.find(c => c.n === item.n && c.size === size);
    if(existing) { existing.qty++; } else { cart.push({ n: item.n, size: size, qty: 1 }); }
    updateCartUI(); showToast();
}
function updateCartUI() {
    const count = cart.reduce((acc, item) => acc + item.qty, 0);
    document.getElementById('cart-count').innerText = `${count} Items`;
    const badge = document.getElementById('nav-cart-badge');
    badge.innerText = count; badge.style.display = count > 0 ? 'inline-block' : 'none';
    const container = document.getElementById('cart-items-container');
    if(cart.length === 0) { container.innerHTML = `<p class="text-[10px] text-slate-400 italic py-2">Your cart is empty.</p>`; return; }
    container.innerHTML = `<div class="flex flex-col gap-2">${cart.map((c, i) => `<div class="flex justify-between items-center bg-slate-50 p-2 rounded border border-slate-100"><div class="flex flex-col"><span class="text-[9px] font-bold text-[var(--navy)] uppercase leading-tight">${c.n}</span><span class="text-[8px] text-slate-400 font-bold">${c.size}</span></div><div class="flex items-center gap-1 bg-white rounded border border-slate-200 px-1"><button onclick="modQty(${i}, -1)" class="w-5 h-5 flex items-center justify-center font-bold text-slate-400 hover:text-red-500 text-xs">-</button><span class="text-[9px] font-black w-4 text-center">${c.qty}</span><button onclick="modQty(${i}, 1)" class="w-5 h-5 flex items-center justify-center font-bold text-slate-400 hover:text-green-500 text-xs">+</button><button onclick="removeItem(${i})" class="w-5 h-5 flex items-center justify-center font-bold text-red-400 hover:text-red-600 ml-1 border-l border-slate-100 text-xs">√ó</button></div></div>`).join('')}</div>`;
}
function modQty(index, amount) { cart[index].qty += amount; if(cart[index].qty <= 0) cart.splice(index, 1); updateCartUI(); }
function removeItem(index) { cart.splice(index, 1); updateCartUI(); }
function showToast() { const t = document.getElementById('toast'); t.classList.remove('hidden'); t.classList.add('show'); setTimeout(() => { t.classList.remove('show'); t.classList.add('hidden'); }, 2000); }
function downloadProfile() { const link = document.createElement('a'); link.href = 'profile.pdf'; link.download = 'Baxo_Solutions_Profile.pdf'; link.click(); }
function shareBusinessCard() { let msg = `üõ°Ô∏è *Baxo Solutions Digital Card*\n\nüëã Hi there! I wanted to share our official supply catalog with you.\n\nüè• *Medical Supplies*\nüöß *PPE & Safety*\n‚ú® *Hygiene & Cleaning*\n\nüëá *Tap to view full inventory & order:*\nhttps://thutotebape-ship-it.github.io/Baxo-solutions/`; window.open(`https://wa.me/?text=${encodeURIComponent(msg)}`); }
function openContactModal() { if(!cart.length) return alert("Your quote is empty."); document.getElementById('contact-modal').classList.remove('hidden'); document.getElementById('contact-modal').classList.add('flex'); }
function closeContactModal() { document.getElementById('contact-modal').classList.add('hidden'); document.getElementById('contact-modal').classList.remove('flex'); }
function finalSubmit(e) {
    e.preventDefault();
    const name = document.getElementById('cust-name').value;
    const email = document.getElementById('cust-email').value;
    const phone = document.getElementById('cust-phone').value;
    let msg = `*BAXO SOLUTIONS - QUOTE REQUEST*\nüë§ ${name}\nüìß ${email}\nüì± ${phone}\n\n*ORDER DETAILS:*\n`;
    cart.forEach(i => { msg += `üì¶ ${i.n}\n   Spec: ${i.size}\n   Qty: ${i.qty}\n\n`; });
    msg += `_Sent from Digital Portal_`;
    window.open(`https://wa.me/26773811270?text=${encodeURIComponent(msg)}`);
    closeContactModal();
}

// Start
loadReviews();
renderCatalog();
</script>
</body>
</html>
